plugins {
    id 'java'
    id 'org.jetbrains.intellij' version '1.15.0'
}

group 'ai.relaycore'
version '0.1.0'

repositories {
    mavenCentral()
}

dependencies {
    implementation 'org.apache.httpcomponents:httpclient:4.5.13'
    implementation 'org.json:json:20230227'
}

intellij {
    version = '2023.1'
    type = 'IC' // IntelliJ IDEA Community Edition
    plugins = ['java']
}

patchPluginXml {
    sinceBuild = '231'
    untilBuild = '241.*'
    changeNotes = """
      <h3>0.1.0</h3>
      <ul>
        <li>Initial release</li>
        <li>Code explanation feature</li>
        <li>Documentation generation feature</li>
        <li>Code optimization feature</li>
        <li>Ask questions about code feature</li>
      </ul>
    """
}

test {
    useJUnitPlatform()
}

tasks.withType(JavaCompile) {
    options.encoding = 'UTF-8'
    sourceCompatibility = '11'
    targetCompatibility = '11'
}

runIde {
    // Increase available memory
    jvmArgs = ['-Xmx2g']
}

buildSearchableOptions {
    enabled = false
}